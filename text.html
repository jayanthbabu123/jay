<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery UI Accordion - Default functionality</title>

    <style>
        .j-accordion .accordion__item {
            width: 100%;
            border-top: 1px solid #fff;
        }

        .j-accordion .accordion__item:first-child {
            border: none;
        }

        .j-accordion .accordion__trigger {
            display: block;
            width: 100%;
            padding: 10px 20px;
            color: blue;
            border: 1px solid #ddd !important;
            background-color: white;
            text-align: left;
            font-size: 17px;
        }

        .j-accordion .accordion__item.is-open .accordion__trigger {
            color: blue;
            background-color: lightblue;
        }

        .j-accordion .accordion__content {
            background-color: #fff;
        }

        .j-accordion.accordion__content p {
            margin: 0;
            padding: 20px;
        }

        .j-accordion li {
            list-style-type: none;
        }

        .j-accordion .is-hidden {
            display: none;
            min-height: 50px;
            border: 1px solid #ddd;
            padding: 15px;
        }

        .j-accordion button:after {
            content: '+';
            float: left;
            padding-right: 10px;
            font-size: 18px
        }

        .j-accordion button.is-active:after {
            content: '-';
            padding-right: 10px;
            font-size: 18px
        }

    </style>
</head>
<body>

<ul class="j-accordion" id="accordionGroupOpen">

</ul>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/tonai/jquery-contenttoggle/master/jquery.contenttoggle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
<script>
    var response = {
        responseCode: "000",
        responseDescription: "SUCCESS",
        mainCategories: [
            {
                mainCategoryId: "1006",
                categoryName: "Labs",
                categoryDisplayName: "Labs"
            },
            {
                mainCategoryId: "1007",
                categoryName: "Office Visit By Service",
                categoryDisplayName: "Office Visit By Service"
            },
            {
                mainCategoryId: "1001",
                categoryName: "Imaging-MRI, Scan or X-Ray",
                categoryDisplayName: "Imaging-MRI, Scan or X-Ray"
            },
            {
                mainCategoryId: "1002",
                categoryName: "Office Visit By Specialty",
                categoryDisplayName: "Office Visit By Specialty"
            },
            {
                mainCategoryId: "1003",
                categoryName: "Surgery(Impatient/Outpatient)",
                categoryDisplayName: "Surgery(Impatient/Outpatient)"
            },
            {
                mainCategoryId: "1004",
                categoryName: "Behavioral Health",
                categoryDisplayName: "Behavioral Health"
            },
            {
                mainCategoryId: "1005",
                categoryName: "Immunizations",
                categoryDisplayName: "Immunizations"
            }
        ]
    };
    var categories = {
        responseCode: "000",
        responseDescription: "SUCCESS",
        subCategories: [
            {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: '09401',
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2839",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Abdomen & Pelvis",
                SubcategoryType: "bundle",
                SubDisplayName: "CAT scan, Abdomen and pelvis",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "Active"
            }, {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: "09403",
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2843",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Abdomen & Pelvis",
                SubcategoryType: "bundle",
                SubDisplayName: "CAT scan, Abdomen and pelvis",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "Active"
            }, {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: '09404',
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2845",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Abdomen & Pelvis witout and with contrast",
                SubcategoryType: "bundle",
                SubDisplayName: "CAT scan(without and with contrast), Abdomen and pelvis",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "Active"
            }, {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: "09402",
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2841",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Abdomen & Pelvis without contrast",
                SubcategoryType: "bundle",
                SubDisplayName: "CAT scan(without contrast), Abdomen and pelvis",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "Active"
            }, {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: '09001',
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2833",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Angiography",
                SubcategoryType: "bundle",
                SubDisplayName: "CT Angiography",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "InActive"
            }, {
                mlpCode: null,
                SubCategoryCode: null,
                TreatmentCategoryCode: "09002",
                ValidationTransaction: null,
                ValidationTypeCode: null,
                SubCategoryId: "2836",
                PrntSubcategoryId: "2436",
                MainCategoryId: "1001",
                SubcategoryName: "CT Angiography,Abdomen without and with contrast",
                SubcategoryType: "bundle",
                SubDisplayName: "CT Angiography,Abdomen",
                ChildExsIndicator: "N",
                SubCategoryStatusCode: "Active"
            }
        ]
    }
    response.mainCategories = response.mainCategories.sort(function (a, b) {
        return a.mainCategoryId - b.mainCategoryId
    });
    response.mainCategories.forEach(function (value, index) {
        var sideMenu = '', sideContent = '';
        categories.subCategories.forEach(function (subValue, index) {
            if (subValue.MainCategoryId === value.mainCategoryId) {
                sideMenu = '<div class="panel-body default-border"> Stomach </div>' +
                    '<div class="panel-body default-border"> Ankle </div>' +
                    '<div class="panel-body default-border"> Arm </div>' +
                    '<div class="panel-body default-border"> Back </div>' +
                    '<div class="panel-body default-border"> Breast </div>' +
                    '<div class="panel-body default-border"> Chest </div>' +
                    '<div class="panel-body default-border"> Entire body </div>' +
                    '<div class="panel-body default-border"> Foot </div>' +
                    '<div class="panel-body default-border"> Head </div>' +
                    '<div class="panel-body default-border"> Hip </div>' +
                    '<div class="panel-body default-border"> Leg </div>' +
                    '<div class="panel-body default-border"> Lungs </div>' +
                    '<div class="panel-body default-border"> Neck </div>' +
                    '<div class="panel-body default-border"> Pelvis </div>' +
                    '<div class="panel-body default-border"> Spine </div>';
                sideContent += '<div class="panel-body default-border-b p-lr-none"> <a class="collapsed-title">' + subValue.SubDisplayName + '</a> </div>';
            }
        });
        var accordian = '<li class="accordion__item js-contentToggle">\n' +
            '        <button class="accordion__trigger js-contentToggle__trigger" type="button">' + value.categoryDisplayName + '</button>\n' +
            '        <div class="accordion__content is-hidden js-contentToggle__content">' +
            '<div class="medium-3 columns">' +
            sideMenu +
            '</div> <div class="medium-9 columns ">' +
            sideContent +
            '</div>' +
            '</div>';


        $("#accordionGroupOpen").append(accordian);
    });
</script>
<script>
    $('.js-contentToggle').contentToggle();
</script>
</html>